**[超入門] ド素人でも理解できる！世界一丁寧なデータベース/SQLの教科書**

https://zenn.dev/ttskch/articles/4c1612a99b1459

- データベースとは
    - 表形式でデータが管理されたテーブルの集まり
        - データの管理だけであればExcelでも可能
            - 効率良い管理方法がDBを活用する方法
    - リクエストに応じたデータを好みの形に変形してとりだす事ができる
    - データベース専用のソフト
        - MySQL
            - Oracleが開発したオープンソースのSQL RDB System
                - データベース同士の関係性でデータを管理する方法
        - **PostgreSQL**
            - POSTGRESパッケージを元に30年以上開発されているオープンソースのRDB System
        - Microsoft Access
            - **Microsoft提供のRDB System**
    - ケーススタディ：「ブログ記事と記事ごとのコメント」というデータを管理してみる
        - １つのテーブルでデータ管理
            - １つの記事に対して複数のコメントがある
                - 情報が重複する
                - 情報が重複する事で見づらい
                - 変更箇所が多い
                    - 仕事量が多い
                        - 記事の内容
                        - 記事毎のコメント
                        
                        | 記事内容 | 記事毎のコメント |
                        | --- | --- |
                        | 記事１ |  |
                        | 記事３ |  |
                        | 記事１ | コメント１ |
                        | 記事３ | コメント１ |
                        | 記事３ | コメント２ |
                    - ミスが起きる可能性が高くなる
        - データベースを使うとどうなるか
            - ２つのテーブルで情報を管理する
                - 記事テーブル
                    - ID
                    - タイトル
                    - 本文
                    - 投稿日
                - コメントテーブル
                    - ID
                    - 記事ID
                    - 投稿者名
                    - 本文
                    - 投稿日
                - データの重複がなくなる
                - 変更箇所が少なくなる
- SQLとは
    - SQL（エスキューエル：Structured Query Language）
        - データベースからデータを抽出したりする操作をする言語
            - ソフト毎に方言が存在する
                - 基本は共通する記載方法
                - 関数などがソフト毎で変わるかもしれない
                    - My SQL
                    - PosgreSQL
            - テーブルに対する操作（＝＞　CRUD）
                - データの抽出
                - データの追加
                - データの更新
                - データの削除
- よく使うSQLを覚えよう
    - データの抽出
        - SELECT
        
        ```sql
        SELECT id,title, text,date FROM post;
        ```
        
        - SELECT 取得したい列名をカンマ区切りで並べる FROM テーブル名 ;
        - 全ての列を取得する
            - 取得したい列名の代わりに＊でも代用可能
        - 条件の指定
            - 条件を指定して特定の情報を取得する
                - SELECT文の末尾にWHEREと条件を追加する
            - WHERE
                - 単純な比較
                    - ＝　等しい
                    - ！＝　異なる
                    - >　左辺が右辺とり大きい
            - LIKE
                - 左辺が右辺の文字列と部分一致する
                    - '%！%’
                        - textが！を含む
                    - 'こん%’
                        - こんで始まる
                    - '%なら’
                        - ならで終わる
            - IN
                - 左辺の値が右辺の配列に含まれる
                    - IN (1,3)
                        - idが「１または３」である
            - NOT
                - 直後の演算子、条件を否定する
                    - NOT IN (1,3)
                        - idが「1または3」ではない
            - 条件の結合
                - AND
                    - かつで条件を結合する
                - OR
                    - またはで条件を結合する
                - （）
                    - 結合された条件をまとめる
                        - ANDがORより優先度が高く、（）でまとまりを明示する事が意図しない動作を防ぐ
        - JOIN
            - テーブル同士の結合を行う
                - テーブルには基本、他のテーブルとの関係性を示すためのカラムが用意されている事が一般的
                - テーブルの連結を行った後は、テーブル名.列名と指定する
        - AS
            - SELECTで取得する列名に対して名前をつける事ができる
        - ORDER BY
            - 並び替え
                - ORDER BY 列の指定 昇順/降順の指定
                    - 昇順
                        - ASC
                    - 降順
                        - DESC
        - GROUP BY
            - テーブルの結合をするとWHEREで条件の絞り込みの結果に重複したデータが出力される
                - 指定した内容が同一のものをグルーピングしてくれる
        - LIMIT
            - 取得するレコードの上限数
                - テストで処理内容を実行するなどの場合にLIMITを設けるなどの使い方がある
        - 関数
            - SELECTで取得したデータに対して好きなように加工を行う
                - My SQL
                    - DATE_FORMAT()
                        - 日付の表示形式を指定する関数
                    - COUNT()
                        - データの個数
                    - SUM()
                        - データの合計値
                    - AVG()
                        - 平均の計算
        - 外部キー
            - 表と表を関連付ける関係データベースで他の表を参照するときに他の表の主キーを参照する。
                - 参照される主キーを外部キーという。
                    - likes tabel
                        - user_id
                            - users tableのid
                        - post_id
                            - posts tableのid
        - 主キーと外部キー
            - primary key - foreign key